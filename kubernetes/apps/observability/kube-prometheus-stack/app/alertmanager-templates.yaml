---
apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-templates
  namespace: observability
data:
  homeops.tmpl: |
    {{ define "homeops.title" }}
    {{ if eq .Status "firing" }}ðŸš¨{{ else }}âœ…{{ end }} Home-Ops Alert
    {{ end }}

    {{ define "homeops.slack.text" }}
    {{ range .Alerts }}
    *{{ .Annotations.summary }}*
    {{ .Annotations.description }}
    *Severity:* {{ .Labels.severity | title }}
    *Component:* {{ .Labels.component | default "unknown" }}
    {{ if .Labels.namespace }}*Namespace:* {{ .Labels.namespace }}{{ end }}
    {{ if .Annotations.runbook_url }}
    <{{ .Annotations.runbook_url }}|ðŸ“– Runbook>
    {{ end }}
    {{ end }}
    {{ end }}

    {{ define "homeops.pushover.text" }}
    {{ range .Alerts }}
    {{ .Annotations.summary }}
    
    {{ .Annotations.description }}
    {{ if .Labels.namespace }}
    Namespace: {{ .Labels.namespace }}{{ end }}
    {{ end }}
    {{ end }}