---
# yaml-language-server: $schema=https://version-2024-12.goauthentik.io/blueprints/schema.json
# yamllint disable
version: 1
metadata:
  name: STONEHEDGES-apps-media-prowlarr
entries:
  - id: provider-prowlarr
    model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: k8s/stonehedges.net/services-media/prowlarr
    attrs:
      authorization_flow: !Find [authentik_flows.flow, [slug, "default-provider-authorization-implicit-consent"],]
      invalidation_flow: !Find [authentik_flows.flow, [slug, "default-provider-invalidation-flow"],]
      mode: forward_single
      external_host: https://prowlarr.${SECRET_DOMAIN}
      access_token_validity: hours=24
  - id: application-prowlarr
    model: authentik_core.application
    identifiers:
      slug: prowlarr
    attrs:
      name: Prowlarr
      group: media
      description: Index management
      icon: https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/prowlarr.png
      provider: !KeyOf provider-prowlarr
      policy_engine_mode: any
  - model: authentik_policies.policybinding
    identifiers:
      target: !KeyOf application-prowlarr
      group: !Find [authentik_core.group, [name, "media"]]
    attrs:
      order: 1
